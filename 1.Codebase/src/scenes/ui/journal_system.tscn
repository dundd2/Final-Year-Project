[gd_scene load_steps=10 format=3 uid="uid://damxh7y4x2n6f"]

[ext_resource type="Script" path="res://1.Codebase/src/scripts/ui/journal_system.gd" id="1_journal"]
[ext_resource type="Texture2D" path="res://1.Codebase/src/assets/ui/icon_journal.svg" id="2_icon_journal"]
[ext_resource type="Texture2D" path="res://1.Codebase/src/assets/ui/icon_close.svg" id="3_icon_close"]
[ext_resource type="Texture2D" path="res://1.Codebase/src/assets/ui/icon_home.svg" id="4_icon_home"]
[ext_resource type="Texture2D" path="res://1.Codebase/src/assets/ui/icon_save.svg" id="5_icon_save"]

[sub_resource type="StyleBoxFlat" id="1"]
bg_color = Color(0.07, 0.09, 0.13, 0.9)
border_color = Color(0.32, 0.44, 0.66, 0.8)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
corner_radius_top_left = 12
corner_radius_top_right = 12
corner_radius_bottom_right = 12
corner_radius_bottom_left = 12

[sub_resource type="StyleBoxFlat" id="2"]
bg_color = Color(0.05, 0.06, 0.09, 0.95)
border_color = Color(0.4, 0.5, 0.7, 0.6)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
corner_radius_top_left = 8
corner_radius_top_right = 8
corner_radius_bottom_right = 8
corner_radius_bottom_left = 8

[sub_resource type="StyleBoxFlat" id="3"]
bg_color = Color(0.09, 0.1, 0.15, 0.92)
border_color = Color(0.48, 0.62, 0.86, 0.85)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
corner_radius_top_left = 10
corner_radius_top_right = 10
corner_radius_bottom_right = 10
corner_radius_bottom_left = 10

[sub_resource type="StyleBoxFlat" id="4"]
bg_color = Color(0, 0, 0, 0.8)

[sub_resource type="StyleBoxFlat" id="5"]
bg_color = Color(0.1, 0.12, 0.18, 1)
border_color = Color(0.4, 0.5, 0.7, 0.8)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
corner_radius_top_left = 16
corner_radius_top_right = 16
corner_radius_bottom_right = 16
corner_radius_bottom_left = 16
shadow_color = Color(0, 0, 0, 0.4)
shadow_size = 10

[node name="JournalSystem" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_journal")

[node name="Background" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.08, 0.06, 0.05, 0.95)

[node name="JournalBook" type="Panel" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="MarginContainer" type="MarginContainer" parent="JournalBook"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 24
theme_override_constants/margin_top = 24
theme_override_constants/margin_right = 24
theme_override_constants/margin_bottom = 24

[node name="VBoxContainer" type="VBoxContainer" parent="JournalBook/MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 12

[node name="Header" type="HBoxContainer" parent="JournalBook/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_constants/separation = 10
alignment = 2

[node name="TitleIcon" type="TextureRect" parent="JournalBook/MarginContainer/VBoxContainer/Header"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
texture = ExtResource("2_icon_journal")
expand_mode = 1
stretch_mode = 5
modulate = Color(0.85, 0.92, 1, 1)

[node name="Title" type="Label" parent="JournalBook/MarginContainer/VBoxContainer/Header"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_font_sizes/font_size = 26
theme_override_colors/font_color = Color(0.9, 0.95, 1, 1)
text = "Personal Journal"

[node name="CloseButton" type="Button" parent="JournalBook/MarginContainer/VBoxContainer/Header"]
custom_minimum_size = Vector2(40, 40)
layout_mode = 2
icon = ExtResource("3_icon_close")
expand_icon = true
icon_alignment = 1
text = ""

[node name="HomeButton" type="Button" parent="JournalBook/MarginContainer/VBoxContainer/Header"]
custom_minimum_size = Vector2(40, 40)
layout_mode = 2
icon = ExtResource("4_icon_home")
expand_icon = true
icon_alignment = 1
text = ""

[node name="SaveButton" type="Button" parent="JournalBook/MarginContainer/VBoxContainer/Header"]
custom_minimum_size = Vector2(80, 40)
layout_mode = 2
icon = ExtResource("5_icon_save")
expand_icon = true
text = "Save"

[node name="Description" type="Label" parent="JournalBook/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(0.75, 0.82, 0.9, 1)
theme_override_font_sizes/font_size = 14
text = "Record your true feelings here. No one will see, no moral blackmail."
autowrap_mode = 3
horizontal_alignment = 1

[node name="HSeparator" type="HSeparator" parent="JournalBook/MarginContainer/VBoxContainer"]
layout_mode = 2

[node name="EntryPrompt" type="Label" parent="JournalBook/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(0.85, 0.92, 1, 1)
theme_override_font_sizes/font_size = 15
text = "How did today's mission make you feel?"
horizontal_alignment = 1

[node name="ContextPanelContainer" type="ScrollContainer" parent="JournalBook/MarginContainer/VBoxContainer"]
custom_minimum_size = Vector2(0, 160)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 0
horizontal_scroll_mode = 0
vertical_scroll_mode = 2

[node name="ContextPanel" type="Panel" parent="JournalBook/MarginContainer/VBoxContainer/ContextPanelContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_styles/panel = SubResource("1")

[node name="ContextMargin" type="MarginContainer" parent="JournalBook/MarginContainer/VBoxContainer/ContextPanelContainer/ContextPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 12
theme_override_constants/margin_top = 12
theme_override_constants/margin_right = 12
theme_override_constants/margin_bottom = 12

[node name="ContextVBox" type="VBoxContainer" parent="JournalBook/MarginContainer/VBoxContainer/ContextPanelContainer/ContextPanel/ContextMargin"]
layout_mode = 2
theme_override_constants/separation = 6

[node name="LatestStoryLabel" type="Label" parent="JournalBook/MarginContainer/VBoxContainer/ContextPanelContainer/ContextPanel/ContextMargin/ContextVBox"]
layout_mode = 2
theme_override_font_sizes/font_size = 15
theme_override_colors/font_color = Color(0.7, 0.85, 1, 1)
text = "Latest Story"

[node name="LatestStoryText" type="RichTextLabel" parent="JournalBook/MarginContainer/VBoxContainer/ContextPanelContainer/ContextPanel/ContextMargin/ContextVBox"]
custom_minimum_size = Vector2(0, 50)
layout_mode = 2
theme_override_font_sizes/normal_font_size = 13
theme_override_colors/default_color = Color(0.85, 0.9, 0.95, 1)
bbcode_enabled = true
fit_content = true
scroll_active = false
autowrap_mode = 3
text = "[i]No story recorded yet.[/i]"

[node name="RecentEventsLabel" type="Label" parent="JournalBook/MarginContainer/VBoxContainer/ContextPanelContainer/ContextPanel/ContextMargin/ContextVBox"]
layout_mode = 2
theme_override_font_sizes/font_size = 15
theme_override_colors/font_color = Color(0.7, 0.85, 1, 1)
text = "ðŸ“Œ Recent Events"

[node name="RecentEventsText" type="RichTextLabel" parent="JournalBook/MarginContainer/VBoxContainer/ContextPanelContainer/ContextPanel/ContextMargin/ContextVBox"]
custom_minimum_size = Vector2(0, 45)
layout_mode = 2
theme_override_font_sizes/normal_font_size = 13
theme_override_colors/default_color = Color(0.85, 0.9, 0.95, 1)
bbcode_enabled = true
fit_content = true
scroll_active = false
autowrap_mode = 3
text = "[i]No events summary yet.[/i]"

[node name="SuggestionPanelContainer" type="ScrollContainer" parent="JournalBook/MarginContainer/VBoxContainer"]
custom_minimum_size = Vector2(0, 120)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 0
horizontal_scroll_mode = 0
vertical_scroll_mode = 2

[node name="SuggestionPanel" type="Panel" parent="JournalBook/MarginContainer/VBoxContainer/SuggestionPanelContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_styles/panel = SubResource("1")

[node name="SuggestionMargin" type="MarginContainer" parent="JournalBook/MarginContainer/VBoxContainer/SuggestionPanelContainer/SuggestionPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 12
theme_override_constants/margin_top = 12
theme_override_constants/margin_right = 12
theme_override_constants/margin_bottom = 12

[node name="SuggestionVBox" type="VBoxContainer" parent="JournalBook/MarginContainer/VBoxContainer/SuggestionPanelContainer/SuggestionPanel/SuggestionMargin"]
layout_mode = 2
theme_override_constants/separation = 6

[node name="SuggestionHeader" type="Label" parent="JournalBook/MarginContainer/VBoxContainer/SuggestionPanelContainer/SuggestionPanel/SuggestionMargin/SuggestionVBox"]
layout_mode = 2
theme_override_font_sizes/font_size = 15
theme_override_colors/font_color = Color(0.7, 0.85, 1, 1)
text = "AI Suggested Reflections"
horizontal_alignment = 1

[node name="SuggestionStatus" type="Label" parent="JournalBook/MarginContainer/VBoxContainer/SuggestionPanelContainer/SuggestionPanel/SuggestionMargin/SuggestionVBox"]
layout_mode = 2
theme_override_font_sizes/font_size = 12
theme_override_colors/font_color = Color(0.65, 0.75, 0.85, 1)
autowrap_mode = 3
text = "Loading..."
horizontal_alignment = 1

[node name="SuggestionButtons" type="VBoxContainer" parent="JournalBook/MarginContainer/VBoxContainer/SuggestionPanelContainer/SuggestionPanel/SuggestionMargin/SuggestionVBox"]
layout_mode = 2
theme_override_constants/separation = 6

[node name="ScrollContainer" type="ScrollContainer" parent="JournalBook/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="EntriesList" type="VBoxContainer" parent="JournalBook/MarginContainer/VBoxContainer/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 15

[node name="HSeparator2" type="HSeparator" parent="JournalBook/MarginContainer/VBoxContainer"]
layout_mode = 2

[node name="NewEntryLabel" type="Label" parent="JournalBook/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 15
theme_override_colors/font_color = Color(0.85, 0.92, 1, 1)
text = "Write a new journal entry:"
horizontal_alignment = 1

[node name="PresetPanel" type="Panel" parent="JournalBook/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_styles/panel = SubResource("3")

[node name="PresetMargin" type="MarginContainer" parent="JournalBook/MarginContainer/VBoxContainer/PresetPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 12
theme_override_constants/margin_top = 12
theme_override_constants/margin_right = 12
theme_override_constants/margin_bottom = 12

[node name="PresetVBox" type="VBoxContainer" parent="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin"]
layout_mode = 2
theme_override_constants/separation = 12

[node name="ResponseOptions" type="HBoxContainer" parent="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox"]
layout_mode = 2
theme_override_constants/separation = 10
alignment = 1

[node name="FrustratedButton" type="Button" parent="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions"]
layout_mode = 2
size_flags_horizontal = 3
text = "Frustrated"

[node name="HopelessButton" type="Button" parent="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions"]
layout_mode = 2
size_flags_horizontal = 3
text = "Hopeless"

[node name="AngryButton" type="Button" parent="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions"]
layout_mode = 2
size_flags_horizontal = 3
text = "Angry"

[node name="ResponseOptions2" type="HBoxContainer" parent="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox"]
layout_mode = 2
theme_override_constants/separation = 10
alignment = 1

[node name="ConfusedButton" type="Button" parent="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions2"]
layout_mode = 2
size_flags_horizontal = 3
text = "Confused"

[node name="TiredButton" type="Button" parent="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions2"]
layout_mode = 2
size_flags_horizontal = 3
text = "Tired"

[node name="CustomButton" type="Button" parent="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions2"]
layout_mode = 2
size_flags_horizontal = 3
text = "Custom"

[node name="CustomEntryOverlay" type="Panel" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("4")

[node name="DialogPanel" type="PanelContainer" parent="CustomEntryOverlay"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -350.0
offset_top = -250.0
offset_right = 350.0
offset_bottom = 250.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("5")

[node name="MarginContainer" type="MarginContainer" parent="CustomEntryOverlay/DialogPanel"]
layout_mode = 2
theme_override_constants/margin_left = 30
theme_override_constants/margin_top = 30
theme_override_constants/margin_right = 30
theme_override_constants/margin_bottom = 30

[node name="VBoxContainer" type="VBoxContainer" parent="CustomEntryOverlay/DialogPanel/MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 20

[node name="Label" type="Label" parent="CustomEntryOverlay/DialogPanel/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 22
theme_override_colors/font_color = Color(0.9, 0.95, 1, 1)
text = "Write your own entry"
horizontal_alignment = 1

[node name="CustomInput" type="TextEdit" parent="CustomEntryOverlay/DialogPanel/MarginContainer/VBoxContainer"]
custom_minimum_size = Vector2(0, 200)
layout_mode = 2
size_flags_vertical = 3
theme_override_font_sizes/font_size = 16
placeholder_text = "Write your true feelings..."
wrap_mode = 1

[node name="ButtonsContainer" type="HBoxContainer" parent="CustomEntryOverlay/DialogPanel/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_constants/separation = 20
alignment = 1

[node name="CancelCustomButton" type="Button" parent="CustomEntryOverlay/DialogPanel/MarginContainer/VBoxContainer/ButtonsContainer"]
custom_minimum_size = Vector2(120, 40)
layout_mode = 2
text = "Cancel"

[node name="SubmitCustomButton" type="Button" parent="CustomEntryOverlay/DialogPanel/MarginContainer/VBoxContainer/ButtonsContainer"]
custom_minimum_size = Vector2(120, 40)
layout_mode = 2
text = "Submit"

[connection signal="pressed" from="JournalBook/MarginContainer/VBoxContainer/Header/CloseButton" to="." method="_on_close_pressed"]
[connection signal="pressed" from="JournalBook/MarginContainer/VBoxContainer/Header/HomeButton" to="." method="_on_home_pressed"]
[connection signal="pressed" from="JournalBook/MarginContainer/VBoxContainer/Header/SaveButton" to="." method="_on_save_pressed"]
[connection signal="pressed" from="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions/FrustratedButton" to="." method="_on_preset_selected" binds= ["frustrated"]]
[connection signal="pressed" from="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions/HopelessButton" to="." method="_on_preset_selected" binds= ["hopeless"]]
[connection signal="pressed" from="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions/AngryButton" to="." method="_on_preset_selected" binds= ["angry"]]
[connection signal="pressed" from="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions2/ConfusedButton" to="." method="_on_preset_selected" binds= ["confused"]]
[connection signal="pressed" from="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions2/TiredButton" to="." method="_on_preset_selected" binds= ["tired"]]
[connection signal="pressed" from="JournalBook/MarginContainer/VBoxContainer/PresetPanel/PresetMargin/PresetVBox/ResponseOptions2/CustomButton" to="." method="_on_custom_pressed"]
[connection signal="pressed" from="CustomEntryOverlay/DialogPanel/MarginContainer/VBoxContainer/ButtonsContainer/CancelCustomButton" to="." method="_on_cancel_custom"]
[connection signal="pressed" from="CustomEntryOverlay/DialogPanel/MarginContainer/VBoxContainer/ButtonsContainer/SubmitCustomButton" to="." method="_on_submit_custom"]
